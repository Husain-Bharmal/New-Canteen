{"ast":null,"code":"import axios from \"axios\";\nimport { PLACE_ORDER_REQUEST, PLACE_ORDER_SUCCESS, PLACE_ORDER_FAIL, GET_ADMIN_ORDER_REQUEST, GET_ADMIN_ORDER_SUCCESS, GET_ADMIN_ORDER_FAIL, CONFIRM_ORDER_SUCCESS, CONFIRM_ORDER_REQUEST, CONFIRM_ORDER_FAIL, GET_MY_ORDERS_REQUEST, GET_MY_ORDERS_SUCCESS, GET_MY_ORDERS_FAIL, SET_PAYMENT_TYPE_SUCCESS, SET_PAYMENT_TYPE_REQUEST, SET_PAYMENT_TYPE_FAIL, SET_PAYMENT_STATUS_SUCCESS, SET_PAYMENT_STATUS_REQUEST, SET_PAYMENT_STATUS_FAIL } from \"./order.types\";\nimport { setAlert } from \"../alert/alert.actions\";\nexport const placeOrder = (formData, history) => async dispatch => {\n  try {\n    dispatch({\n      type: PLACE_ORDER_REQUEST\n    });\n    const {\n      data\n    } = await axios.post(\"/place/order\", formData);\n    dispatch({\n      type: PLACE_ORDER_SUCCESS,\n      data: data\n    });\n    dispatch(setAlert(\"Placed order successfully\", \"success\"));\n    history.push(\"/dashboard\");\n  } catch (error) {\n    console.log(error);\n    const errors = error.response.data.errors;\n    if (errors) {\n      errors.forEach(error => dispatch(setAlert(error.msg, \"danger\")));\n    }\n    if (error.response.data.msg) {\n      dispatch(setAlert(error.response.data.msg, \"danger\"));\n    }\n    dispatch({\n      type: PLACE_ORDER_FAIL,\n      payload: error.message\n    });\n  }\n};\nexport const getAdminORders = () => async dispatch => {\n  try {\n    dispatch({\n      type: GET_ADMIN_ORDER_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(\"/orders\");\n    console.log(data);\n    dispatch({\n      type: GET_ADMIN_ORDER_SUCCESS,\n      payload: data.data\n    });\n  } catch (error) {\n    dispatch({\n      type: GET_ADMIN_ORDER_FAIL,\n      payload: error\n    });\n    console.log(error);\n  }\n};\nexport const confirmOrder = (id, isConfirmed, history) => async dispatch => {\n  try {\n    dispatch({\n      type: CONFIRM_ORDER_REQUEST\n    });\n    const {\n      data\n    } = await axios.put(`/orders/${id}`, {\n      isConfirmed\n    });\n    dispatch({\n      type: CONFIRM_ORDER_SUCCESS,\n      payload: {\n        data,\n        id,\n        isConfirmed\n      }\n    });\n    window.location.reload();\n    history.push(\"/dashboard\");\n  } catch (error) {\n    const errors = error.response && error.response.data.errors;\n    if (errors) {\n      errors.forEach(error => dispatch(setAlert(error.msg, \"danger\")));\n    }\n    if (error.response && error.response.data.msg) {\n      dispatch(setAlert(error.response.data.msg, \"danger\"));\n    }\n    dispatch({\n      type: CONFIRM_ORDER_FAIL,\n      payload: error\n    });\n    console.log(error);\n  }\n};\nexport const getMyOrders = () => async dispatch => {\n  try {\n    dispatch({\n      type: GET_MY_ORDERS_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(`/myorders`);\n    dispatch({\n      type: GET_MY_ORDERS_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: GET_MY_ORDERS_FAIL,\n      payload: error\n    });\n    console.log(error);\n  }\n};\nexport const setpaymentType = (id, paymentType, history) => async dispatch => {\n  try {\n    dispatch({\n      type: SET_PAYMENT_TYPE_REQUEST\n    });\n    const {\n      data\n    } = await axios.put(`/order/payment-type/${id}`, {\n      paymentType\n    });\n    dispatch({\n      type: SET_PAYMENT_TYPE_SUCCESS,\n      payload: {\n        data,\n        id,\n        paymentType\n      }\n    });\n    window.location.reload();\n    history.push(\"/dashboard\");\n  } catch (error) {\n    dispatch({\n      type: SET_PAYMENT_TYPE_FAIL,\n      payload: error\n    });\n    console.log(error);\n  }\n};\nexport const setpaymentStatus = (id, history) => async dispatch => {\n  try {\n    dispatch({\n      type: SET_PAYMENT_STATUS_REQUEST\n    });\n    const {\n      data\n    } = await axios.put(`/payment-status/${id}`);\n    dispatch({\n      type: SET_PAYMENT_STATUS_SUCCESS,\n      payload: {\n        data,\n        id\n      }\n    });\n    dispatch(setAlert(\"Payment done\", \"success\"));\n    window.location.reload();\n    history.push(\"/dashboard\");\n  } catch (error) {\n    dispatch({\n      type: SET_PAYMENT_STATUS_FAIL,\n      payload: error\n    });\n    console.log(error);\n  }\n};","map":{"version":3,"names":["axios","PLACE_ORDER_REQUEST","PLACE_ORDER_SUCCESS","PLACE_ORDER_FAIL","GET_ADMIN_ORDER_REQUEST","GET_ADMIN_ORDER_SUCCESS","GET_ADMIN_ORDER_FAIL","CONFIRM_ORDER_SUCCESS","CONFIRM_ORDER_REQUEST","CONFIRM_ORDER_FAIL","GET_MY_ORDERS_REQUEST","GET_MY_ORDERS_SUCCESS","GET_MY_ORDERS_FAIL","SET_PAYMENT_TYPE_SUCCESS","SET_PAYMENT_TYPE_REQUEST","SET_PAYMENT_TYPE_FAIL","SET_PAYMENT_STATUS_SUCCESS","SET_PAYMENT_STATUS_REQUEST","SET_PAYMENT_STATUS_FAIL","setAlert","placeOrder","formData","history","dispatch","type","data","post","push","error","console","log","errors","response","forEach","msg","payload","message","getAdminORders","get","confirmOrder","id","isConfirmed","put","window","location","reload","getMyOrders","setpaymentType","paymentType","setpaymentStatus"],"sources":["C:/ReactProjects/CMS/New-Canteen/frontend/src/redux/order/order.actions.js"],"sourcesContent":["import axios from \"axios\";\r\nimport {\r\n  PLACE_ORDER_REQUEST,\r\n  PLACE_ORDER_SUCCESS,\r\n  PLACE_ORDER_FAIL,\r\n  GET_ADMIN_ORDER_REQUEST,\r\n  GET_ADMIN_ORDER_SUCCESS,\r\n  GET_ADMIN_ORDER_FAIL,\r\n  CONFIRM_ORDER_SUCCESS,\r\n  CONFIRM_ORDER_REQUEST,\r\n  CONFIRM_ORDER_FAIL,\r\n  GET_MY_ORDERS_REQUEST,\r\n  GET_MY_ORDERS_SUCCESS,\r\n  GET_MY_ORDERS_FAIL,\r\n  SET_PAYMENT_TYPE_SUCCESS,\r\n  SET_PAYMENT_TYPE_REQUEST,\r\n  SET_PAYMENT_TYPE_FAIL,\r\n  SET_PAYMENT_STATUS_SUCCESS,\r\n  SET_PAYMENT_STATUS_REQUEST,\r\n  SET_PAYMENT_STATUS_FAIL,\r\n} from \"./order.types\";\r\nimport { setAlert } from \"../alert/alert.actions\";\r\n\r\nexport const placeOrder = (formData, history) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: PLACE_ORDER_REQUEST });\r\n\r\n    const { data } = await axios.post(\"/place/order\", formData);\r\n\r\n    dispatch({ type: PLACE_ORDER_SUCCESS, data: data });\r\n    dispatch(setAlert(\"Placed order successfully\", \"success\"));\r\n\r\n    history.push(\"/dashboard\");\r\n  } catch (error) {\r\n    console.log(error);\r\n    const errors = error.response.data.errors;\r\n\r\n    if (errors) {\r\n      errors.forEach((error) => dispatch(setAlert(error.msg, \"danger\")));\r\n    }\r\n    if (error.response.data.msg) {\r\n      dispatch(setAlert(error.response.data.msg, \"danger\"));\r\n    }\r\n\r\n    dispatch({ type: PLACE_ORDER_FAIL, payload: error.message });\r\n  }\r\n};\r\n\r\nexport const getAdminORders = () => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: GET_ADMIN_ORDER_REQUEST });\r\n\r\n    const { data } = await axios.get(\"/orders\");\r\n    console.log(data);\r\n    dispatch({ type: GET_ADMIN_ORDER_SUCCESS, payload: data.data });\r\n  } catch (error) {\r\n    dispatch({ type: GET_ADMIN_ORDER_FAIL, payload: error });\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const confirmOrder = (id, isConfirmed, history) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: CONFIRM_ORDER_REQUEST });\r\n\r\n    const { data } = await axios.put(`/orders/${id}`, {\r\n      isConfirmed,\r\n    });\r\n    dispatch({\r\n      type: CONFIRM_ORDER_SUCCESS,\r\n      payload: { data, id, isConfirmed },\r\n    });\r\n    window.location.reload();\r\n    history.push(\"/dashboard\");\r\n  } catch (error) {\r\n    const errors = error.response && error.response.data.errors;\r\n\r\n    if (errors) {\r\n      errors.forEach((error) => dispatch(setAlert(error.msg, \"danger\")));\r\n    }\r\n    if (error.response && error.response.data.msg) {\r\n      dispatch(setAlert(error.response.data.msg, \"danger\"));\r\n    }\r\n\r\n    dispatch({ type: CONFIRM_ORDER_FAIL, payload: error });\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const getMyOrders = () => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: GET_MY_ORDERS_REQUEST });\r\n\r\n    const { data } = await axios.get(`/myorders`);\r\n    dispatch({ type: GET_MY_ORDERS_SUCCESS, payload: data });\r\n  } catch (error) {\r\n    dispatch({ type: GET_MY_ORDERS_FAIL, payload: error });\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const setpaymentType =\r\n  (id, paymentType, history) => async (dispatch) => {\r\n    try {\r\n      dispatch({ type: SET_PAYMENT_TYPE_REQUEST });\r\n\r\n      const { data } = await axios.put(`/order/payment-type/${id}`, {\r\n        paymentType,\r\n      });\r\n      dispatch({\r\n        type: SET_PAYMENT_TYPE_SUCCESS,\r\n        payload: { data, id, paymentType },\r\n      });\r\n      window.location.reload();\r\n      history.push(\"/dashboard\");\r\n    } catch (error) {\r\n      dispatch({ type: SET_PAYMENT_TYPE_FAIL, payload: error });\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\nexport const setpaymentStatus = (id, history) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: SET_PAYMENT_STATUS_REQUEST });\r\n\r\n    const { data } = await axios.put(`/payment-status/${id}`);\r\n    dispatch({ type: SET_PAYMENT_STATUS_SUCCESS, payload: { data, id } });\r\n    dispatch(setAlert(\"Payment done\", \"success\"));\r\n    window.location.reload();\r\n    history.push(\"/dashboard\");\r\n  } catch (error) {\r\n    dispatch({ type: SET_PAYMENT_STATUS_FAIL, payload: error });\r\n    console.log(error);\r\n  }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}